var colorTool=echarts.color,maskRegex=/[0-9\-+#]/,notMaskRegex=/[^\d\-+#]/g;function getIndex(e){return e.search(maskRegex)}function processMask(e,t,a){var r={},o=e.length,i=getIndex(e);r.prefix=0<i?e.substring(0,i):"";var n=getIndex(e.split("").reverse().join("")),l=o-n,s=e.substring(l,1+l),c=l+("."===s||","===s?1:0);r.suffix=0<n?e.substring(c,o):"",r.mask=e.substring(i,c),r.maskHasNegativeSign="-"===r.mask.charAt(0),r.maskHasPositiveSign="+"===r.mask.charAt(0);var u=r.mask.match(notMaskRegex);return null==u&&(u=[" "]),1==u.length&&u.push("."),r.decimal=u&&u[u.length-1]||".",void 0!==t&&(r.mask=r.mask.replace(r.decimal,"dec"),r.decimal=t),r.separator=u&&u[1]&&u[0]||",",void 0!==a&&(r.mask=r.mask.replace(r.separator,"sep"),r.separator=a),void 0!==t&&(r.mask=r.mask.replace("dec",t)),void 0!==a&&(r.mask=r.mask.replace("sep",a)),u=r.mask.split(r.decimal),r.integer=u[0],r.fraction=u[1],r}function processValue(e,t,a){var r=!1,o={};(o.value=e)<0&&(r=!0,o.value=-o.value),o.sign=r?"-":"",o.value=Number(o.value).toFixed(t.fraction&&t.fraction.length),o.value=Number(o.value).toString();var i=t.fraction&&t.fraction.lastIndexOf("0"),n="0",l="",s=o.value.split(".");return 0<s.length&&(n=s[0]),1<s.length&&(l=s[1]),(!l||l&&l.length<=i)&&(l=i<0?"":Number("0."+l).toFixed(i+1).replace("0.","")),o.integer=n,o.fraction=l,addSeparators(o,t),"0"!==o.result&&""!==o.result||(r=!1,o.sign=""),!r&&t.maskHasPositiveSign?o.sign="+":r&&t.maskHasPositiveSign?o.sign="-":r&&(o.sign=a&&a.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),o}function addSeparators(e,t){e.result="";var a=t.integer.split(t.separator),r=a.join(""),o=r&&r.indexOf("0");if(-1<o)for(;e.integer.length<r.length-o;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var i=a[1]&&a[a.length-1].length;if(i)for(var n=e.integer.length,l=n%i,s=0;s<n;s++)e.result+=e.integer.charAt(s),!((s-l+1)%i)&&s<n-i&&(e.result+=t.separator);else e.result=e.integer;return e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:"",e}function sortData(e,t,a){if(t.sort(function(e,t){return e[1]-t[1]}),void 0!==e.maxDimValueCount&&t.length>e.maxDimValueCount){var r=e.showFirst?t.length-e.maxDimValueCount:0;t.splice(r,e.maxDimValueCount)}if(null!=a&&e.separateColors){for(var o=[],i=0;i<t.length;i++){var n=t[i][t[i].length-1];o.push({value:t[i],itemStyle:{normal:{color:a[n[0][0]]}}})}return o}return t}function sankeyLabel(e){if(void 0===e)return null;var t=e.split("+");return 0<t.length?t[0]:e}function strSize(e,t){var a=document.createTextNode(e),r=document.createElement("A");r.style.fontSize=t+"px",r.style.margin="0px",r.style.padding="0px",r.appendChild(a),document.body.appendChild(r);var o=r.offsetHeight;return document.body.removeChild(r),o}function optimalRowsColsCount(e,t,a){var r=[];return r.push(1==a?1:Math.max(1,Math.round(Math.sqrt(a*t/e)))),r.push(1==a?1:Math.max(1,Math.ceil(a/r[0]))),r}function linearGradient(e){if(void 0===e)return null;if(1===e.length)return e[0];for(var t=1===e[0]?0:1,a=1===e[0]?1:0,r=[],o=1;o<e.length;)r.push({offset:e[o],color:e[o+1]}),o+=2;return new echarts.graphic.LinearGradient(0,0,t,a,r)}function calcGrid(e,t,a,r,o){var i="HorizontalBar"===o||"PairedBar"===o,n=i?a.yAxis:a.xAxis,l=i?a.xAxis:a.yAxis,s=void 0!==n&&void 0!==n.dataZoom?8:0,c=void 0!==l&&void 0!==l.dataZoom?8:0;if(void 0===a.multi)r.grid={right:0+c+"%",left:0,bottom:0+s+"%",top:0,containLabel:!0},r.title={show:a.subtitle.show,left:a.subtitle.align},a.rowCount=1,a.colCount=1;else{var u=0,f=0,d=0,h=0,g=0;a.series[0].forEach(function(e){if(0===u)g+=1,f+=1;else if(void 0!==e.factAxis)switch(e.factAxis.position){case"right":d+=1;break;case"left":f+=1;break;case"top":h+=1;break;case"bottom":g+=1}u+=1});var m,v=void 0===a.multi?1:a.multi.length;m=optimalRowsColsCount(e,t,v),a.rowCount=m[0],a.colCount=m[1],r.grid=[],a.subtitle.show?r.title=[]:r.title={show:!1};for(var p=a.hideAxis,x=p?(100-s)/(a.rowCount+.15*(h+g)+.02*(a.rowCount-1)):(100-s)/a.rowCount,b=p?(100-c)/(a.colCount+.15*(f+d)+.02*(a.colCount-1)):(100-c)/a.colCount,y=0,k=0,C=0;C<a.rowCount;C+=1){var w=0;t=x,p&&(t+=(C==a.rowCount-1?.15*g*x:0)+(0===C?.15*h*x:0));for(var L=0;L<a.colCount;L+=1){e=b;var S=0;if(p&&(e+=(0===L?.15*f*b:0)+(L==a.colCount-1?.15*d*b:0),S=L<a.colCount&&1<a.colCount?.02:0),r.grid.push({width:e-100*S+"%",left:w+"%",top:k+"%",height:t+"%",containLabel:!0}),a.subtitle.show&&y<v){var T;switch(a.subtitle.align){case"left":T=w+"%";break;case"center":T=w+e/2+"%";break;case"right":T=w+e+"%"}r.title.push({text:a.multi[y],x:T,y:k+.05*t+"%",textStyle:{color:a.subtitle.color,fontSize:a.subtitle.size,fontStyle:a.subtitle.style,fontWeight:a.subtitle.weight},backgroundColor:linearGradient(a.subtitle.background),textAlign:a.subtitle.align})}if(w+=e,y+=1,!a.hideAxis&&y==v)break}k+=t}}}function image(e,t,a,r,o,i){return{id:"img"+i,type:"image",left:e.background.left,top:e.background.top,zlevel:o,scale:[e.background.scale,e.background.scale],style:{image:r,width:e.background.stretchx?t:e.background.width,height:e.background.stretchy?a:e.background.height,opacity:e.background.opacity}}}function format2(e,t){if(isNaN(Number(t)))return t;var a=processMask(void 0===e.format?"#.##":e.format,e.decimalPoint,e.separator),r=processValue(t,a,{});return a.prefix=a.prefix.replace(/[\']/g,""),a.suffix=a.suffix.replace(/[\']/g,""),a.prefix+r.sign+r.result+a.suffix}function valueFormatter(e,t){return void 0===e||void 0===t||null==e?e:format2(t,e)}function dataZoom(e,t,a,r,o,i,n){var l={};if("inside"==(l.type=n)&&(l.moveOnMouseWheel=!0,l.zoomOnMouseWheel=!1,l.preventDefaultMouseMove=!1),hor="HorizontalBar"==t||"PairedBar"==t,setting="x"===a?hor?e.yAxis:e.xAxis:hor?e.xAxis:e.yAxis,!("x"===a&&0===option.xAxis.length||"y"==a&&0===option.yAxis.length)&&void 0!==setting.dataZoom){"value"===setting.dataZoom.intervalType?(l.startValue=setting.dataZoom.start,l.endValue=setting.dataZoom.end):(l.start=setting.dataZoom.start,l.end=setting.dataZoom.end),"slider"==n&&(l.showDetail=setting.dataZoom.showDetail),l.zoomLock=setting.dataZoom.zoomLock;for(var s=[],c="x"==a?option.xAxis:option.yAxis,u=0;u<c.length;u+=1){var f=Math.floor(c[u].gridIndex/e.colCount),d=c[u].gridIndex-e.colCount*f;(-1!=o&&o==f||-1!=i&&i==d)&&s.push(u)}"x"==a?l.xAxisIndex=s:l.yAxisIndex=s,r.push(l)}}function regressionData(e,t){var a=e.regLinesProps.type,r=[];if(void 0!==e.facts.x)r=t;else for(var o=0;o<t.length;o+=1)r.push([o+1,t[o][1]]);var i="polynomial"==a?ecStat.regression(a,r,e.regLinesProps.order):ecStat.regression(a,r);if(void 0===e.facts.x)for(o=0;o<i.points.length;o+=1)i.points[o]=[t[o][0],i.points[o][1]];else i.points.sort(function(e,t){return e[0]-t[0]});return i}function regressionSeries(e){var t={type:"line"};return t.lineStyle={normal:{type:e.regLinesProps.lineType,color:e.regLinesProps.color,width:e.regLinesProps.width}},t.smooth="linear"!=e.regLinesProps.type&&"linearThroughOrigin"!=e.regLinesProps.type,t.showSymbol=!1,t.markPoint={itemStyle:{normal:{color:"transparent"}},label:{normal:{show:e.regLinesProps.showLabel,position:"left",textStyle:{color:"#333",fontSize:14}}}},t}function zeroLine(e,t,a){if(void 0!==t.zeroLine){var r={name:"0"};"y"==a?r.yAxis=0:r.xAxis=0,r.lineStyle={normal:{type:t.zeroLine.type,color:t.zeroLine.color,width:t.zeroLine.width}},e.push(r)}}function averageLine(e,t){if(void 0!==e.averageLine){var a={name:"average",type:"average"};a.lineStyle={normal:{type:e.averageLine.type,color:e.averageLine.color,width:e.averageLine.width}},t.push(a)}}function fillTargets(r,e,o,i){if(null!==e){var n=i?1:2;e.forEach(function(e){if(e.values.length==n){var t={name:e.name};if(t.label={show:e.labelShow,position:"end",formatter:"{b}"},o?t.yAxis=e.values[0]:t.xAxis=e.values[0],i?t.lineStyle={normal:{type:e.type,color:e.color,width:e.width}}:t.itemStyle={color:linearGradient(e.color)},i)r.push(t);else{var a={};o?a.yAxis=e.values[1]:a.xAxis=e.values[1],r.push([t,a])}}})}}function targetLine(e,t,a,r){fillTargets(e,void 0===t||void 0===t.targets?null:t.targets,!0,!0),void 0!==a&&void 0!==a.targets&&fillTargets(e,a.targets,!1,!0),fillTargets(e,r,!1,!0)}function targetArea(e,t,a,r){fillTargets(e,void 0===t||void 0===t.targets?null:t.targets,!0,!1),void 0!==a&&void 0!==a.targets&&fillTargets(e,a.targets,!1,!1),fillTargets(e,r,!1,!1)}function fillText(e,t){e.color=t.color,e.backgroundColor=t.background,e.fontSize=t.size,e.fontStyle=t.style,e.fontWeight=t.weight,void 0!==t.textBorderColor&&(e.textBorderColor=t.textBorderColor,e.textBorderWidth=t.textBorderWidth)}function simpleLinearGradient(e,t,a){return new echarts.graphic.LinearGradient(0,0,a?0:1,a?1:0,[{offset:0,color:e},{offset:1,color:t}])}function bostonProps(e,t){if(void 0!==e.isBoston)for(var a=["insideTopLeft","insideTopRight","insideBottomLeft","insideBottomRight"],r=0,o=0;o<2;o+=1){for(var i=0,n=0;n<2;n+=1){var l=2*o+n,s=[];s.push({itemStyle:{borderColor:e.bostonData.lineColor,borderWidth:e.bostonData.lineWidth,color:e.bostonData.colors[l]},label:{show:e.bostonData.textShow,color:e.bostonData.color,fontStyle:e.bostonData.style,fontWeight:e.bostonData.weight,fontSize:e.bostonData.size,backgroundColor:linearGradient(e.bostonData.background),position:a[l]},name:e.bostonData.texts[l],x:i+"%",y:r+"%"}),s.push({x:i+e.bostonData.width[n]+"%",y:r+e.bostonData.height[o]+"%"}),t.push(s),i+=e.bostonData.width[n]}r+=e.bostonData.height[o]}}function barGradient3d(e,t,a,r){var o=[];return o.push({offset:0,color:a}),o.push({offset:.1,color:"rgb(250, 250, 250)"}),o.push({offset:.3,color:a}),o.push({offset:.4,color:e}),o.push({offset:.6,color:t}),o.push({offset:.8,color:e}),o.push({offset:.9,color:t}),o.push({offset:1,color:a}),new echarts.graphic.LinearGradient(0,0,r?0:1,r?1:0,o)}function radialGradient(e){var t=colorTool.modifyHSL(e,null,null,.8);return new echarts.graphic.RadialGradient(.75,.25,1,[{offset:0,color:t},{offset:1,color:e}])}function darkColor(e,t){var a=colorTool.rgba2hsla(colorTool.parse(e));return colorTool.modifyHSL(e,null,null,a[2]-a[2]*t/100)}function lightColor(e,t){var a=colorTool.rgba2hsla(colorTool.parse(e));return colorTool.modifyHSL(e,null,null,a[2]+(1-a[2])*t/100)}function bubbleGradient(e,t,a){return new echarts.graphic.RadialGradient(.3,.3,1,[{offset:0,color:"rgba(255, 255, 255, 255)"},{offset:.3,color:a},{offset:1,color:t}])}function pieGradient(e,t){return echarts.graphic.RadialGradient(.5,.5,1,[{offset:0,color:e},{offset:.9,color:e},{offset:1,color:t}])}function seriesColor(e,t,a,r){if(void 0!==a)return linearGradient(a);if(void 0===t||r)return e;switch(t){case"Hor":return simpleLinearGradient(darkColor(e,30),lightColor(e,30),!1);case"Vert":return simpleLinearGradient(darkColor(e,30),lightColor(e,30),!0);case"Hor3d":return barGradient3d(e,darkColor(e,20),lightColor(e,30),!1);case"Vert3d":return barGradient3d(e,darkColor(e,20),lightColor(e,30),!0);case"Pie":return pieGradient(e,darkColor(e,50));case"Bubble":return bubbleGradient(e,darkColor(e,20),lightColor(e,20));case"Solid":return e}return e}function seriesColors(e,t){for(var a=[],r=0;r<t.length;r+=1){var o=0<e.series[0].length?e.series[0][0]:e.series[0];a.push(seriesColor(t[r],o.gradientType,o.fillGradient))}return a}function candleTooltip(e,t){var a=[],r=e.data[t.seriesIndex][t.dataIndex];return 2==r.length?(a.push("Min: "+valueFormatter(r[1],e.facts.y.format)),a.push("Max: "+valueFormatter(r[0],e.facts.x.format))):(a.push("Low: "+valueFormatter(r[1],e.facts.y.format)),a.push("High: "+valueFormatter(r[0],e.facts.x.format)),a.push("Open: "+valueFormatter(r[2],e.facts.size.format)),a.push("Close: "+valueFormatter(r[3],e.facts.f4.format))),a.join("<br/>")}function candleMax(e){var t=e.facts.x.max;return t=Math.max(t,e.facts.y.max),void 0!==e.facts.size&&(t=Math.max(t,e.facts.size.max)),void 0!==e.facts.f4&&(t=Math.max(t,e.facts.f4.max)),t}function fillLegend(e,t){var a={};return(a.show=t)&&(void 0!==e.legend.background&&(a.backgroundColor=linearGradient(e.legend.background)),a.borderColor=e.legend.borderColor,a.borderWidth=e.legend.borderWidth,a.borderRadius=4,a.orient=e.legend.orient,a.padding=5,"vertical"==e.legend.orient?(e.legend.left?a.left="left":a.right="right",a.top="middle"):(e.legend.top?a.top="top":a.bottom="bottom",a.left="center"),a.textStyle={color:e.legend.color,fontSize:e.legend.size,fontStyle:e.legend.style,fontWeight:e.legend.weight}),a}function fillTimeLine(e,t){switch(t){case"top":e.orient="horizontal",e.y=0;break;case"bottom":e.orient="horizontal";break;case"left":e.orient="vertical",e.x=0,e.y=10,e.width=55,e.height="90%";break;case"right":e.orient="vertical",e.x=null,e.x2=0,e.y=10,e.width=55,e.height="90%"}}function getFactLabel(e,t,a,r){return valueFormatter(t,null===a?r:a.format)}function factLabel(e,t,a,r){var o=1<a.value.length?a.value[1]:a.value;"PairedBar"==t&&(o=Math.abs(o));var i=void 0!==e.facts?void 0===e.facts.y?e.facts.size:e.facts.y:null,n=[];n.push(getFactLabel(e,o,i,r)),("Bubble"==t||"Marimekko"==t)&&2<a.value.length&&n.push(getFactLabel(e,a.value[2],void 0===e.facts.size?null:e.facts.size,r));var l="Bubble"==t?"\n":", ";return n.join(l)}function axisLabelClicked(e,t){if(!e.portal){var a=echarts.number.linkText(t.event.target.style.text);if(void 0!==a&&"link"==a.substr(0,4)){var r=a.substr(4,a.length-4),o=["internal://n-#link",e.links[r]];document.location.href=o.join(",")}}}function axisData(e,t,a,r){var o=[],i=void 0!==e.timeline||void 0!==e.multi?e.data[r]:e.data;i=i[0],e.sort&&(i=sortData(e,i,null));for(var n=0;n<i.length;n+=1){for(var l=i[n][i[n].length-1],s=[],c=0;c<l.length;c+=1)s.push(e.seriesNames[l[c][0]]);var u={value:s.join(" - ")};0<l.length&&-1!=l[0][2]&&(u.textStyle={color:t.labels.urlColor,textDecoration:"underline"},a.flag=!0),o.push(u)}return o}function factTooltip(e,t,a){var r=e.format;if(void 0!==e.facts){if(void 0!==e.facts.x&&(r=e.facts.x.format,t.push(valueFormatter(a[0],r))),void 0!==e.facts.y&&(r=e.facts.y.format,t.push(valueFormatter(1<a.length?a[1]:a,r))),void 0!==e.facts.size&&2<a.length){r=e.facts.size.format;var o=void 0!==e.facts.y?2:1;t.push(valueFormatter(a[o],r))}}else t.push(valueFormatter(a,r))}function tooltipFormatter(e,t,a){var r=[];if(void 0!==a&&2!==a.length){if("sankey"==e.coordinateSystem){if(void 0===a.data)return null;if(void 0!==a.data.name)return sankeyLabel(a.data.name);if(void 0!==a.data.source&&void 0!==a.data.target)return sankeyLabel(a.data.source)+" - "+sankeyLabel(a.data.target)+" "+a.data.value}if(void 0!==a.value){if(e.tooltips.isSeriesName&&void 0!==a.seriesName&&0<a.seriesName.length&&r.push(a.marker+a.seriesName),e.tooltips.isName&&"HeatMap"!=t)if("tree"===e.coordinateSystem){var o=[];a.treePathInfo.forEach(function(e){""!==e.name&&o.push(e.name)}),r.push(a.marker+o.join(" - "))}else(void 0===e.facts||void 0===e.facts.x)&&1<a.value.length?r.push(a.value[0]):r.push(e.seriesNames[a.dataIndex]);e.tooltips.isValue&&("Candle"===t?r.push(candleTooltip(e,a)):"HeatMap"==t?r.push(valueFormatter(a.value[2],e.facts.y.format)):factTooltip(e,r,a.value))}else if(void 0!==a.name)return a.name}return r.join("<br/>")}function axisFormatter(e,t,a,r,o,i,n,l){if("category"!==t||void 0===o)return e.ColumnStack100?s={decimal:0,prefix:"",sep:!1,suffix:"%"}:void 0!==a&&(s=a.format),valueFormatter(r,s);var s,c=[],u=void 0!==e.timeline?e.data[n]:void 0!==e.multi?e.data[i]:e.data;u=u[0],e.sort&&(u=sortData(e,u,null));for(var f=u[o][u[o].length-1],d=l.labels.textAndImage,h=0;h<f.length;h+=1){var g=[],m="TextUnderImage"===d||"TextOverImage"===d?"\n":" ";if("ImageOnly"!==d&&g.push("{value|"+e.seriesNames[f[h][0]]+"}"),-1!=f[h][1]&&"TextOnly"!==d){var v="image"+f[h][1];v="{"+v+"| }","TextUnderImage"===d||"TextBesideImage"===d?g.unshift(v):g.push(v)}var p=g.join(m);if(-1!=f[h][2])p+=" {"+("link"+f[h][2])+"| }";c.push(p)}return c.join(l.labels.separator)}function kpiLabelFormatter(r,o){var e=r.card,i=void 0!==r.timeline?o.value:r.data[0][o.dataIndex],n=[],l=i[i.length-1][0];return e.list.forEach(function(e){switch(e){case"Actual":var t="";void 0!==r.facts.y.image&&(t="{imageFact| }"),n.push(t+"{factName|"+r.facts.y.name+"}{factValue|"+valueFormatter(i[1],r.facts.y.format)+"}");break;case"Plan":if(null!=r.facts.x){t="";void 0!==r.facts.x.image&&(t="{imagePlan| }"),n.push(t+"{planName|"+r.facts.x.name+"}{planValue|"+valueFormatter(i[0],r.facts.x.format)+"}")}break;case"Percent":null!=r.facts.x&&n.push("{planValue|"+i[1]*i[0]/100+"}");break;case"Object":break;case"IndicatorName":if(0<r.labels.indName.length){var a="";-1!=l[1]&&(a="{image"+l[1]+"| }"),n.push(a+"{indicator|"+r.seriesNames[o.dataIndex]+"}")}}}),n.join("\n")}function kpiLabelsRich(t,a){if(rich={},t.card.list.forEach(function(e){switch(e){case"Actual":rich.factName={},rich.factValue={},fillText(rich.factName,t.facts.y.factHeader),rich.factName.wrap=!0,rich.factName.width=t.card.maxFactWidth,fillText(rich.factValue,t.facts.y.factValue),void 0!==t.facts.y.image&&(rich.imageFact={width:t.facts.y.imageWidth,height:t.facts.y.imageHeight,trueHeight:t.facts.y.imageHeight,align:"center",backgroundColor:{image:t.facts.y.image}});break;case"Plan":null!=t.facts.x&&(rich.planName={},rich.planName.wrap=!0,rich.planName.width=t.card.maxFactWidth,rich.planValue={},fillText(rich.planName,t.facts.x.factHeader),fillText(rich.planValue,t.facts.x.factValue),void 0!==t.facts.x.image&&(rich.imagePlan={width:t.facts.x.imageWidth,height:t.facts.x.imageHeight,trueHeight:t.facts.x.imageHeight,align:"center",backgroundColor:{image:t.facts.x.image}}));break;case"Percent":case"Object":break;case"IndicatorName":0<a.indName.length&&(rich.indicator={},fillText(rich.indicator,a.indName[0]),rich.indicator.wrap=!0)}}),void 0!==t.images)for(var e=0;e<t.images.length;e++){rich["image"+e]={width:t.imageSizes[e][0],height:t.imageSizes[e][1],trueHeight:t.imageSizes[e][1],align:"center",backgroundColor:{image:t.images[e]}}}return rich}function labelFormatter(e,t,a,r){if("kpi"===t)return kpiLabelFormatter(e,r);var o=[],i=!1;if(void 0!==a.series&&(i=void 0!==a.name||void 0!==a.fact&&void 0!==r.value||void 0!==a.percent&&void 0!==r.percent,o.push(a.series.lineBefore+"{series|"+a.series.separatorBefore+r.seriesName+(i?a.series.separatorAfter:"")+"}"+i?a.series.lineAfter:"")),void 0!==a.name&&(i=void 0!==a.fact&&void 0!==r.value||void 0!==a.percent&&void 0!==r.percent,o.push(a.name.lineBefore+"{name|"+a.name.separatorBefore+r.name+(i?a.name.separatorAfter:"")+"}"+(i?a.name.lineAfter:""))),void 0!==a.fact&&void 0!==r.value&&(i=void 0!==a.percent&&void 0!==r.percent,valueName=factLabel(e,t,r,e.format),o.push(a.fact.lineBefore+"{value|"+a.fact.separatorBefore+valueName+(i?a.fact.separatorAfter:"")+"}"+(i?a.fact.lineAfter:""))),void 0!==a.percent&&void 0!==r.percent){var n=r.percent;n=n.toFixed(a.percentDecimals),o.push(a.percent.lineBefore+"{percent|"+a.percent.separatorBefore+n+"%}")}return o.join("")}function fillLabelsRich(e,t,a){return"kpi"===t?kpiLabelsRich(e,a):(rich={},void 0!==a.series&&(rich.series={},fillText(rich.series,a.series)),void 0!==a.name&&(rich.name={},fillText(rich.name,a.name)),void 0!==a.fact&&(rich.value={},fillText(rich.value,a.fact)),void 0!==a.percent&&(rich.percent={},fillText(rich.percent,a.percent)),rich.hr={width:"100%",borderColor:a.lineColor,borderWidth:a.lineWidth,height:0,lineHeight:10},rich)}